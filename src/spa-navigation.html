<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>2.1. Single Page Navigation</title>
    </head>
    <body>
        <nav>
            <ul class="nav">
                <li>
                    <a href="#home" data-page="home">Home</a>
                </li>
                <li>
                    <a href="#about" data-page="about">About</a>
                </li>
                <li>
                    <a href="#service" data-page="services">Services</a>
                </li>
                <li>
                    <a href="#contact" data-page="contact">Contact</a>
                </li>
            </ul>
        </nav>
        <div class="content"></div>
        <script type="module" src="./main.js"></script>
        <script>
            const nav = document.querySelector(".nav");
            const links = document.querySelectorAll(".nav a");
            const content = document.querySelector(".content");

            const pages = {
                home: "Chào mừng đến với trang chủ! Đây là nội dung của trang Home.",
                about: "Thông tin về chúng tôi. Chúng tôi là công ty chuyên về công nghệ web.",
                services:
                    "Các dịch vụ của chúng tôi: Thiết kế web, Lập trình ứng dụng, Tư vấn công nghệ.",
                contact:
                    "Liên hệ với chúng tôi: Email: contact@example.com, Phone: 0123456789",
            };

            function render(page) {
                content.innerHTML = ""; // xóa nội dung cũ

                const h2 = document.createElement("h2");
                h2.textContent = pages[page];

                const p = document.createElement("p");
                p.textContent = `History Length: ${history.length}`;

                content.append(h2, p);

                // Đặt class active cho link đang chọn
                links.forEach((link) =>
                    link.classList.toggle("active", link.dataset.page === page)
                );
            }

            links.forEach((link) => {
                link.addEventListener("click", (e) => {
                    e.preventDefault();

                    // Thay đổi đường dẫn khi nhấn
                    history.pushState(
                        null,
                        null,
                        `${location.pathname}#${link.dataset.page}`
                    );
                    // Render nội dung theo page vừa chọn
                    render(link.dataset.page);
                });
            });

            // Khi người dùng bấm Back/Forward trên trình duyệt
            window.addEventListener("popstate", () => {
                const page = location.hash.replace("#", "") || "home";

                render(page);
            });

            // Khi tải trang lần đầu (F5 hoặc mở URL trực tiếp)
            window.addEventListener("DOMContentLoaded", () => {
                const page = location.hash.replace("#", "") || "home";
                render(page);
            });
        </script>
    </body>
</html>
